# Vue 3 + TypeScript æ¨¡å—åŒ–å‰ç«¯é¡¹ç›®æ¶æ„æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3 + Composition API
- **è¯­è¨€**: TypeScript
- **çŠ¶æ€ç®¡ç†**: Pinia (æ¨è) æˆ– Vuex
- **æ„å»ºå·¥å…·**: Vite
- **è·¯ç”±**: Vue Router 4
- **æ ·å¼**: å¯é€‰ Tailwind CSS / SCSS
- **æµ‹è¯•**: Vitest + Vue Test Utils

### æ¶æ„ç‰¹ç‚¹

- ğŸ—ï¸ **æ¨¡å—åŒ–è®¾è®¡** - åŸºäºåŠŸèƒ½çš„åŠŸèƒ½æ¨¡å—æ¶æ„
- ğŸ¯ **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒ
- ğŸ”§ **å¯ç»´æŠ¤æ€§** - æ¸…æ™°çš„ä»£ç ç»„ç»‡å’Œåˆ†å±‚
- ğŸ§ª **å¯æµ‹è¯•æ€§** - æ¨¡å—åŒ–çš„æµ‹è¯•å‹å¥½è®¾è®¡
- ğŸš€ **å¼€å‘ä½“éªŒ** - ä¼˜ç§€çš„å¼€å‘å·¥å…·å’Œçƒ­é‡è½½
- ğŸ“¦ **ä»£ç å¤ç”¨** - é«˜åº¦çš„ç»„ä»¶å’Œé€»è¾‘å¤ç”¨

## å®Œæ•´ç›®å½•ç»“æ„

```
MeowMemoirs/
â”œâ”€â”€ public/ # é™æ€èµ„æºç›®å½•
â”‚ â”œâ”€â”€ favicon.ico
â”‚ â”œâ”€â”€ logo.png
â”‚ â””â”€â”€ manifest.json
â”œâ”€â”€ src/ # æºä»£ç ç›®å½•
â”‚ â”œâ”€â”€ assets/ # é™æ€èµ„æºï¼ˆç»è¿‡æ„å»ºå¤„ç†ï¼‰
â”‚ â”‚ â”œâ”€â”€ images/ # å›¾ç‰‡èµ„æº
â”‚ â”‚ â”œâ”€â”€ styles/ # å…¨å±€æ ·å¼
â”‚ â”‚ â””â”€â”€ fonts/ # å­—ä½“æ–‡ä»¶
â”‚ â”œâ”€â”€ components/ # å…¨å±€å…±äº«ç»„ä»¶
â”‚ â”œâ”€â”€ composables/ # å…¨å±€å…±äº«ç»„åˆå¼å‡½æ•°
â”‚ â”œâ”€â”€ config/ # åº”ç”¨é…ç½®æ–‡ä»¶
â”‚ â”œâ”€â”€ features/ # åŠŸèƒ½æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼‰
â”‚ â”‚ â”œâ”€â”€ auth/ # è®¤è¯åŠŸèƒ½æ¨¡å—
â”‚ â”‚ â”œâ”€â”€ user/ # ç”¨æˆ·åŠŸèƒ½æ¨¡å—
â”‚ â”‚ â”œâ”€â”€ product/ # äº§å“åŠŸèƒ½æ¨¡å—
â”‚ â”‚ â”œâ”€â”€ order/ # è®¢å•åŠŸèƒ½æ¨¡å—
â”‚ â”‚ â””â”€â”€ dashboard/ # ä»ªè¡¨æ¿åŠŸèƒ½æ¨¡å—
â”‚ â”œâ”€â”€ layouts/ # é¡µé¢å¸ƒå±€ç»„ä»¶
â”‚ â”œâ”€â”€ lib/ # ç¬¬ä¸‰æ–¹åº“é…ç½®
â”‚ â”œâ”€â”€ pages/ # é¡µé¢ç»„ä»¶
â”‚ â”œâ”€â”€ plugins/ # Vue æ’ä»¶
â”‚ â”œâ”€â”€ router/ # è·¯ç”±é…ç½®
â”‚ â”œâ”€â”€ services/ # åº”ç”¨æœåŠ¡å±‚
â”‚ â”œâ”€â”€ stores/ # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚ â”œâ”€â”€ test/ # æµ‹è¯•ç›¸å…³æ–‡ä»¶
â”‚ â”œâ”€â”€ types/ # å…¨å±€ç±»å‹å®šä¹‰
â”‚ â”œâ”€â”€ utils/ # å·¥å…·å‡½æ•°
â”‚ â”œâ”€â”€ App.vue # æ ¹ç»„ä»¶
â”‚ â””â”€â”€ main.ts # åº”ç”¨å…¥å£
â”œâ”€â”€ tests/ # æµ‹è¯•ç›®å½•
â”œâ”€â”€ docs/ # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ .env # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.development # å¼€å‘ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.production # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts # Vite æ„å»ºé…ç½®
â”œâ”€â”€ vitest.config.ts # æµ‹è¯•é…ç½®
â””â”€â”€ README.md

```

## è¯¦ç»†ç›®å½•è¯´æ˜

### 1. æ ¹ç›®å½•æ ¸å¿ƒç»“æ„

#### `src/assets/` - é™æ€èµ„æº

**ç”¨é€”**: ç»è¿‡æ„å»ºå¤„ç†çš„é™æ€èµ„æºæ–‡ä»¶

```

src/assets/
â”œâ”€â”€ images/ # å›¾ç‰‡èµ„æº
â”‚ â”œâ”€â”€ icons/ # å›¾æ ‡
â”‚ â”œâ”€â”€ logos/ # Logo
â”‚ â””â”€â”€ backgrounds/ # èƒŒæ™¯å›¾ç‰‡
â”œâ”€â”€ styles/ # å…¨å±€æ ·å¼
â”‚ â”œâ”€â”€ base.scss # åŸºç¡€æ ·å¼
â”‚ â”œâ”€â”€ variables.scss # SCSS å˜é‡
â”‚ â”œâ”€â”€ mixins.scss # SCSS Mixins
â”‚ â””â”€â”€ global.css # å…¨å±€æ ·å¼
â””â”€â”€ fonts/ # å­—ä½“æ–‡ä»¶
â”œâ”€â”€ inter/ # Inter å­—ä½“
â””â”€â”€ material-icons/ # Material Icons

```

#### `src/components/` - å…¨å±€å…±äº«ç»„ä»¶

**ç”¨é€”**: æ•´ä¸ªåº”ç”¨å¤ç”¨çš„ UI ç»„ä»¶ï¼Œéµå¾ªåŸå­è®¾è®¡åŸåˆ™

```

src/components/
â”œâ”€â”€ ui/ # åŸºç¡€ UI ç»„ä»¶ï¼ˆåŸå­çº§ï¼‰
â”‚ â”œâ”€â”€ BaseButton/
â”‚ â”‚ â”œâ”€â”€ BaseButton.vue
â”‚ â”‚ â”œâ”€â”€ BaseButton.stories.ts # Storybook æ•…äº‹
â”‚ â”‚ â””â”€â”€ index.ts
â”‚ â”œâ”€â”€ BaseInput/
â”‚ â”‚ â”œâ”€â”€ BaseInput.vue
â”‚ â”‚ â””â”€â”€ index.ts
â”‚ â”œâ”€â”€ BaseModal/
â”‚ â”‚ â”œâ”€â”€ BaseModal.vue
â”‚ â”‚ â””â”€â”€ index.ts
â”‚ â””â”€â”€ BaseTable/
â”‚ â”œâ”€â”€ BaseTable.vue
â”‚ â””â”€â”€ index.ts
â”œâ”€â”€ forms/ # è¡¨å•ç»„ä»¶ï¼ˆåˆ†å­çº§ï¼‰
â”‚ â”œâ”€â”€ FormInput/
â”‚ â”œâ”€â”€ FormSelect/
â”‚ â””â”€â”€ FormDatePicker/
â”œâ”€â”€ layout/ # å¸ƒå±€ç»„ä»¶
â”‚ â”œâ”€â”€ AppHeader/
â”‚ â”œâ”€â”€ AppSidebar/
â”‚ â””â”€â”€ AppFooter/
â”œâ”€â”€ feedback/ # åé¦ˆç»„ä»¶
â”‚ â”œâ”€â”€ LoadingSpinner/
â”‚ â”œâ”€â”€ ErrorMessage/
â”‚ â””â”€â”€ SuccessMessage/
â””â”€â”€ index.ts # å…¨å±€ç»„ä»¶æ³¨å†Œ

```

**ç»„ä»¶æ³¨å†Œç¤ºä¾‹**:

```typescript
// src/components/index.ts
import BaseButton from "./ui/BaseButton/BaseButton.vue";
import BaseInput from "./ui/BaseInput/BaseInput.vue";

export { BaseButton, BaseInput };

// è‡ªåŠ¨å…¨å±€æ³¨å†Œï¼ˆå¯é€‰ï¼‰
export const registerGlobalComponents = (app: any) => {
  app.component("BaseButton", BaseButton);
  app.component("BaseInput", BaseInput);
};
```

#### `src/composables/` - å…¨å±€å…±äº«ç»„åˆå¼å‡½æ•°

**ç”¨é€”**: è·¨åŠŸèƒ½å¤ç”¨çš„ä¸šåŠ¡é€»è¾‘å°è£…

```
src/composables/
â”œâ”€â”€ api/                        # API ç›¸å…³
â”‚   â”œâ”€â”€ useApi.ts               # é€šç”¨ API è°ƒç”¨
â”‚   â””â”€â”€ useFetch.ts             # æ•°æ®è·å–é€»è¾‘
â”œâ”€â”€ state/                      # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ useLocalStorage.ts      # æœ¬åœ°å­˜å‚¨
â”‚   â”œâ”€â”€ useSessionStorage.ts    # ä¼šè¯å­˜å‚¨
â”‚   â””â”€â”€ useGlobalState.ts       # å…¨å±€çŠ¶æ€
â”œâ”€â”€ ui/                         # UI ç›¸å…³
â”‚   â”œâ”€â”€ useTheme.ts             # ä¸»é¢˜åˆ‡æ¢
â”‚   â”œâ”€â”€ useModal.ts             # æ¨¡æ€æ¡†ç®¡ç†
â”‚   â””â”€â”€ useToast.ts             # æ¶ˆæ¯æç¤º
â”œâ”€â”€ utilities/                  # å·¥å…·ç±»
â”‚   â”œâ”€â”€ useDebounce.ts          # é˜²æŠ–
â”‚   â”œâ”€â”€ useThrottle.ts          # èŠ‚æµ
â”‚   â””â”€â”€ useClipboard.ts         # å‰ªè´´æ¿
â””â”€â”€ index.ts                    # ç»Ÿä¸€å¯¼å‡º
```

**ç»„åˆå¼å‡½æ•°ç¤ºä¾‹**:

```typescript
// src/composables/api/useApi.ts
import { ref } from "vue";

export const useApi = <T>() => {
  const data = ref<T | null>(null);
  const loading = ref(false);
  const error = ref<string | null>(null);

  const execute = async (url: string, options?: RequestInit) => {
    loading.value = true;
    error.value = null;

    try {
      const response = await fetch(url, options);
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      data.value = await response.json();
    } catch (err) {
      error.value = err instanceof Error ? err.message : "An error occurred";
    } finally {
      loading.value = false;
    }
  };

  return {
    data,
    loading,
    error,
    execute,
  };
};
```

#### `src/config/` - åº”ç”¨é…ç½®

**ç”¨é€”**: åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶å’Œå¸¸é‡å®šä¹‰

```
src/config/
â”œâ”€â”€ app.ts                      # åº”ç”¨åŸºç¡€é…ç½®
â”œâ”€â”€ api.ts                      # API ç«¯ç‚¹é…ç½®
â”œâ”€â”€ theme.ts                    # ä¸»é¢˜é…ç½®
â”œâ”€â”€ constants.ts                # å¸¸é‡å®šä¹‰
â”œâ”€â”€ routes.ts                   # è·¯ç”±é…ç½®
â””â”€â”€ environment.ts              # ç¯å¢ƒé…ç½®
```

**é…ç½®ç¤ºä¾‹**:

```typescript
// src/config/app.ts
export const appConfig = {
  name: "My App",
  version: "1.0.0",
  locale: "zh-CN",
  supportedLocales: ["zh-CN", "en-US"],
  apiTimeout: 10000,
  features: {
    darkMode: true,
    pwa: true,
    analytics: false,
  },
};

// src/config/api.ts
export const apiConfig = {
  baseURL: import.meta.env.VITE_API_BASE_URL || "https://api.example.com",
  endpoints: {
    auth: {
      login: "/auth/login",
      register: "/auth/register",
      logout: "/auth/logout",
    },
    user: {
      profile: "/user/profile",
      preferences: "/user/preferences",
    },
  },
  timeout: 10000,
};
```

### 2. åŠŸèƒ½æ¨¡å—ç»“æ„ (`features/`)

**æ ¸å¿ƒæ¦‚å¿µ**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„ä¸šåŠ¡å•å…ƒï¼ŒåŒ…å«è¯¥åŠŸèƒ½çš„æ‰€æœ‰ç›¸å…³ä»£ç ã€‚

#### åŠŸèƒ½æ¨¡å—æ¨¡æ¿ç»“æ„

```
src/features/
â”œâ”€â”€ {feature-name}/              # åŠŸèƒ½æ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ api/                     # åŠŸèƒ½APIè°ƒç”¨
â”‚   â”œâ”€â”€ components/              # åŠŸèƒ½ä¸“ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ composables/             # åŠŸèƒ½ä¸“ç”¨ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ stores/                  # åŠŸèƒ½çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/                   # åŠŸèƒ½ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/                   # åŠŸèƒ½å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ constants/               # åŠŸèƒ½å¸¸é‡
â”‚   â”œâ”€â”€ __tests__/               # åŠŸèƒ½æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ index.ts                 # æ¨¡å—å…¥å£ï¼ˆå…¬å…±APIï¼‰
```

#### è®¤è¯åŠŸèƒ½æ¨¡å—ç¤ºä¾‹ (`auth`)

```
src/features/auth/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ authApi.ts               # è®¤è¯API
â”‚   â”œâ”€â”€ userApi.ts               # ç”¨æˆ·API
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ LoginForm/
â”‚   â”‚   â”œâ”€â”€ LoginForm.vue
â”‚   â”‚   â”œâ”€â”€ LoginForm.stories.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ RegisterForm/
â”‚   â”‚   â”œâ”€â”€ RegisterForm.vue
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ UserProfile/
â”‚   â”‚   â”œâ”€â”€ UserProfile.vue
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useAuth.ts               # è®¤è¯çŠ¶æ€é€»è¾‘
â”‚   â”œâ”€â”€ useUserPermissions.ts    # æƒé™æ£€æŸ¥
â”‚   â”œâ”€â”€ useUserProfile.ts        # ç”¨æˆ·èµ„æ–™
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ authStore.ts             # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ userStore.ts             # ç”¨æˆ·çŠ¶æ€
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ auth.types.ts            # è®¤è¯ç±»å‹
â”‚   â”œâ”€â”€ user.types.ts            # ç”¨æˆ·ç±»å‹
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ authHelpers.ts           # è®¤è¯å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ permissionUtils.ts       # æƒé™å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ constants/
â”‚   â”œâ”€â”€ auth.constants.ts        # è®¤è¯å¸¸é‡
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ __tests__/                   # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ authStore.spec.ts
â”‚   â”œâ”€â”€ useAuth.spec.ts
â”‚   â””â”€â”€ LoginForm.spec.ts
â””â”€â”€ index.ts                     # æ¨¡å—å…¥å£
```

#### åŠŸèƒ½æ¨¡å—å†…éƒ¨è¯¦ç»†å®ç°

##### `features/auth/api/` - API å±‚

```typescript
// features/auth/api/authApi.ts
import { apiClient } from "@/services/api/httpClient";
import type { LoginData, RegisterData, AuthResponse } from "../types";

export const authApi = {
  async login(credentials: LoginData): Promise<AuthResponse> {
    const response = await apiClient.post<AuthResponse>(
      "/auth/login",
      credentials
    );
    return response.data;
  },

  async register(userData: RegisterData): Promise<AuthResponse> {
    const response = await apiClient.post<AuthResponse>(
      "/auth/register",
      userData
    );
    return response.data;
  },

  async logout(): Promise<void> {
    await apiClient.post("/auth/logout");
  },

  async refreshToken(): Promise<{ token: string }> {
    const response = await apiClient.post<{ token: string }>("/auth/refresh");
    return response.data;
  },
};

// features/auth/api/index.ts
export { authApi } from "./authApi";
```

##### `features/auth/composables/` - ä¸šåŠ¡é€»è¾‘å±‚

```typescript
// features/auth/composables/useAuth.ts
import { ref, computed } from "vue";
import { authApi } from "../api";
import { useAuthStore } from "../stores";
import type { LoginData, RegisterData, User } from "../types";

export const useAuth = () => {
  const authStore = useAuthStore();
  const loading = ref(false);
  const error = ref<string | null>(null);

  const user = computed(() => authStore.user);
  const isAuthenticated = computed(() => authStore.isAuthenticated);

  const login = async (credentials: LoginData): Promise<void> => {
    loading.value = true;
    error.value = null;

    try {
      const response = await authApi.login(credentials);
      authStore.setUser(response.user);
      authStore.setToken(response.token);
    } catch (err) {
      error.value = err instanceof Error ? err.message : "Login failed";
      throw err;
    } finally {
      loading.value = false;
    }
  };

  const register = async (userData: RegisterData): Promise<void> => {
    loading.value = true;
    error.value = null;

    try {
      const response = await authApi.register(userData);
      authStore.setUser(response.user);
      authStore.setToken(response.token);
    } catch (err) {
      error.value = err instanceof Error ? err.message : "Registration failed";
      throw err;
    } finally {
      loading.value = false;
    }
  };

  const logout = async (): Promise<void> => {
    try {
      await authApi.logout();
    } finally {
      authStore.clearAuth();
    }
  };

  return {
    // State
    user,
    isAuthenticated,
    loading: computed(() => loading.value),
    error: computed(() => error.value),

    // Actions
    login,
    register,
    logout,
  };
};

// features/auth/composables/index.ts
export { useAuth } from "./useAuth";
export { useUserPermissions } from "./useUserPermissions";
```

##### `features/auth/stores/` - çŠ¶æ€ç®¡ç†å±‚

```typescript
// features/auth/stores/authStore.ts
import { defineStore } from "pinia";
import { ref, computed } from "vue";
import type { User } from "../types";

export const useAuthStore = defineStore("auth", () => {
  // State
  const user = ref<User | null>(null);
  const token = ref<string | null>(null);

  // Getters
  const isAuthenticated = computed(() => !!token.value);
  const userId = computed(() => user.value?.id || null);
  const userRole = computed(() => user.value?.role || null);

  // Actions
  const setUser = (newUser: User) => {
    user.value = newUser;
  };

  const setToken = (newToken: string) => {
    token.value = newToken;
    // å­˜å‚¨åˆ° localStorage
    localStorage.setItem("auth_token", newToken);
  };

  const clearAuth = () => {
    user.value = null;
    token.value = null;
    localStorage.removeItem("auth_token");
  };

  // åˆå§‹åŒ–æ—¶ä» localStorage æ¢å¤ token
  const initialize = () => {
    const savedToken = localStorage.getItem("auth_token");
    if (savedToken) {
      token.value = savedToken;
      // è¿™é‡Œå¯ä»¥æ·»åŠ éªŒè¯ token æœ‰æ•ˆæ€§çš„é€»è¾‘
    }
  };

  return {
    // State
    user,
    token,

    // Getters
    isAuthenticated,
    userId,
    userRole,

    // Actions
    setUser,
    setToken,
    clearAuth,
    initialize,
  };
});

// features/auth/stores/index.ts
export { useAuthStore } from "./authStore";
```

##### `features/auth/types/` - ç±»å‹å®šä¹‰å±‚

```typescript
// features/auth/types/auth.types.ts
export interface User {
  id: number;
  email: string;
  name: string;
  role: UserRole;
  avatar?: string;
  createTime: string;
  updateTime: string;
}

export type UserRole = "admin" | "user" | "moderator";

export interface LoginData {
  email: string;
  password: string;
  rememberMe?: boolean;
}

export interface RegisterData {
  email: string;
  password: string;
  name: string;
  agreeToTerms: boolean;
}

export interface AuthResponse {
  user: User;
  token: string;
  expiresIn: number;
}

export interface AuthState {
  user: User | null;
  token: string | null;
  isAuthenticated: boolean;
}

// features/auth/types/index.ts
export type {
  User,
  UserRole,
  LoginData,
  RegisterData,
  AuthResponse,
  AuthState,
} from "./auth.types";
```

##### `features/auth/index.ts` - æ¨¡å—å…¥å£

```typescript
// features/auth/index.ts
// å…¬å…± API - åªå¯¼å‡ºå…è®¸å¤–éƒ¨è®¿é—®çš„å†…å®¹

// Components
export { default as LoginForm } from "./components/LoginForm/LoginForm.vue";
export { default as RegisterForm } from "./components/RegisterForm/RegisterForm.vue";
export { default as UserProfile } from "./components/UserProfile/UserProfile.vue";

// Composables
export { useAuth } from "./composables/useAuth";
export { useUserPermissions } from "./composables/useUserPermissions";

// Stores
export { useAuthStore } from "./stores/authStore";

// Types
export type {
  User,
  UserRole,
  LoginData,
  RegisterData,
  AuthResponse,
} from "./types";
```

### 3. å…¶ä»–é‡è¦ç›®å½•

#### `src/services/` - åº”ç”¨æœåŠ¡å±‚

**ç”¨é€”**: å…±äº«çš„åº”ç”¨æœåŠ¡å’Œæ•°æ®æä¾›è€…

```
src/services/
â”œâ”€â”€ api/                          # API æœåŠ¡
â”‚   â”œâ”€â”€ httpClient.ts             # HTTP å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ interceptors.ts           # è¯·æ±‚æ‹¦æˆªå™¨
â”‚   â””â”€â”€ errorHandler.ts           # é”™è¯¯å¤„ç†
â”œâ”€â”€ storage/                      # å­˜å‚¨æœåŠ¡
â”‚   â”œâ”€â”€ localStorage.ts
â”‚   â”œâ”€â”€ sessionStorage.ts
â”‚   â””â”€â”€ indexedDB.ts
â”œâ”€â”€ auth/                         # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ tokenService.ts
â”‚   â””â”€â”€ permissionService.ts
â”œâ”€â”€ notification/                 # é€šçŸ¥æœåŠ¡
â”‚   â”œâ”€â”€ toastService.ts
â”‚   â””â”€â”€ pushService.ts
â””â”€â”€ index.ts
```

**æœåŠ¡ç¤ºä¾‹**:

```typescript
// src/services/api/httpClient.ts
import axios from "axios";
import { apiConfig } from "@/config/api";

export const httpClient = axios.create({
  baseURL: apiConfig.baseURL,
  timeout: apiConfig.timeout,
  headers: {
    "Content-Type": "application/json",
  },
});

// è¯·æ±‚æ‹¦æˆªå™¨
httpClient.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem("auth_token");
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// å“åº”æ‹¦æˆªå™¨
httpClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // å¤„ç†æœªæˆæƒé”™è¯¯
      localStorage.removeItem("auth_token");
      window.location.href = "/login";
    }
    return Promise.reject(error);
  }
);
```

#### `src/stores/` - å…¨å±€çŠ¶æ€ç®¡ç†

**ç”¨é€”**: å…¨å±€çŠ¶æ€å­˜å‚¨ï¼Œç®¡ç†è·¨åŠŸèƒ½çš„çŠ¶æ€

```
src/stores/
â”œâ”€â”€ appStore.ts                   # åº”ç”¨å…¨å±€çŠ¶æ€
â”œâ”€â”€ uiStore.ts                    # UI çŠ¶æ€ç®¡ç†
â”œâ”€â”€ notificationStore.ts          # é€šçŸ¥çŠ¶æ€
â””â”€â”€ index.ts
```

**å…¨å±€ Store ç¤ºä¾‹**:

```typescript
// src/stores/appStore.ts
import { defineStore } from "pinia";
import { ref, computed } from "vue";

export const useAppStore = defineStore("app", () => {
  // State
  const isLoading = ref(false);
  const pageTitle = ref("");
  const sidebarCollapsed = ref(false);
  const currentTheme = ref<"light" | "dark">("light");

  // Getters
  const appVersion = computed(() => import.meta.env.VITE_APP_VERSION);

  // Actions
  const setLoading = (loading: boolean) => {
    isLoading.value = loading;
  };

  const setPageTitle = (title: string) => {
    pageTitle.value = title;
    document.title = `${title} - My App`;
  };

  const toggleSidebar = () => {
    sidebarCollapsed.value = !sidebarCollapsed.value;
  };

  const toggleTheme = () => {
    currentTheme.value = currentTheme.value === "light" ? "dark" : "light";
    document.documentElement.setAttribute("data-theme", currentTheme.value);
  };

  return {
    // State
    isLoading,
    pageTitle,
    sidebarCollapsed,
    currentTheme,

    // Getters
    appVersion,

    // Actions
    setLoading,
    setPageTitle,
    toggleSidebar,
    toggleTheme,
  };
});
```

#### `src/types/` - å…¨å±€ç±»å‹å®šä¹‰

**ç”¨é€”**: å…±äº«çš„ TypeScript ç±»å‹å®šä¹‰

```
src/types/
â”œâ”€â”€ global.d.ts                   # å…¨å±€ç±»å‹å£°æ˜
â”œâ”€â”€ api.types.ts                  # API å“åº”ç±»å‹
â”œâ”€â”€ common.types.ts               # é€šç”¨ç±»å‹
â”œâ”€â”€ vue.d.ts                      # Vue ç±»å‹æ‰©å±•
â””â”€â”€ index.ts
```

**ç±»å‹å®šä¹‰ç¤ºä¾‹**:

```typescript
// src/types/api.types.ts
export interface ApiResponse<T = any> {
  data: T;
  message: string;
  success: boolean;
  timestamp: string;
}

export interface PaginatedResponse<T> extends ApiResponse<T[]> {
  pagination: {
    page: number;
    pageSize: number;
    total: number;
    totalPages: number;
  };
}

export interface ApiError {
  code: string;
  message: string;
  details?: any;
}

// src/types/vue.d.ts
declare module "vue" {
  interface ComponentCustomProperties {
    $filters: {
      formatDate: (date: string | Date) => string;
      formatCurrency: (amount: number) => string;
    };
  }
}
```

#### `src/utils/` - å·¥å…·å‡½æ•°

**ç”¨é€”**: å…±äº«çš„ utility å‡½æ•°

```
src/utils/
â”œâ”€â”€ helpers/                      # è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ date.ts                   # æ—¥æœŸå¤„ç†
â”‚   â”œâ”€â”€ string.ts                 # å­—ç¬¦ä¸²å¤„ç†
â”‚   â”œâ”€â”€ number.ts                 # æ•°å­—å¤„ç†
â”‚   â”œâ”€â”€ validation.ts             # éªŒè¯å‡½æ•°
â”‚   â””â”€â”€ object.ts                 # å¯¹è±¡å¤„ç†
â”œâ”€â”€ constants/                    # å¸¸é‡
â”‚   â”œâ”€â”€ routes.ts                 # è·¯ç”±å¸¸é‡
â”‚   â”œâ”€â”€ app.ts                    # åº”ç”¨å¸¸é‡
â”‚   â””â”€â”€ regex.ts                  # æ­£åˆ™è¡¨è¾¾å¼
â”œâ”€â”€ formatters/                   # æ ¼å¼åŒ–å‡½æ•°
â”‚   â”œâ”€â”€ dateFormatter.ts
â”‚   â”œâ”€â”€ currencyFormatter.ts
â”‚   â””â”€â”€ numberFormatter.ts
â””â”€â”€ index.ts
```

**å·¥å…·å‡½æ•°ç¤ºä¾‹**:

```typescript
// src/utils/helpers/date.ts
import { format, formatDistanceToNow, parseISO } from "date-fns";

export const formatDate = (
  date: string | Date,
  formatStr = "yyyy-MM-dd"
): string => {
  if (!date) return "";
  const dateObj = typeof date === "string" ? parseISO(date) : date;
  return format(dateObj, formatStr);
};

export const timeAgo = (date: string | Date): string => {
  if (!date) return "";
  const dateObj = typeof date === "string" ? parseISO(date) : date;
  return formatDistanceToNow(dateObj, { addSuffix: true });
};

export const isValidDate = (date: any): boolean => {
  return date instanceof Date && !isNaN(date.getTime());
};
```

## å¼€å‘æŒ‡å—

### 1. åˆ›å»ºæ–°åŠŸèƒ½æ¨¡å—

**æ­¥éª¤ 1: åˆ›å»ºæ¨¡å—ç»“æ„**

```bash
mkdir -p src/features/new-feature/{api,components,composables,stores,types,utils,constants,__tests__}
```

**æ­¥éª¤ 2: å®ç°æ¨¡å—æ ¸å¿ƒæ–‡ä»¶**

```typescript
// features/new-feature/index.ts
// å¯¼å‡ºå…¬å…± API
export { default as NewComponent } from "./components/NewComponent/NewComponent.vue";
export { useNewFeature } from "./composables/useNewFeature";
export { useNewFeatureStore } from "./stores/newFeatureStore";
export type { NewFeatureType } from "./types";
```

**æ­¥éª¤ 3: åœ¨åº”ç”¨ä¸­ä½¿ç”¨**

```typescript
// åœ¨é¡µé¢æˆ–ç»„ä»¶ä¸­
import { useNewFeature, NewComponent } from "@/features/new-feature";
```

### 2. Hook å­˜æ”¾è§„åˆ™

#### åŠŸèƒ½ç‰¹å®šçš„ Hook

**ä½ç½®**: `features/[feature-name]/composables/`

- åªåœ¨ç‰¹å®šåŠŸèƒ½æ¨¡å—å†…éƒ¨ä½¿ç”¨
- åŒ…å«ç‰¹å®šä¸šåŠ¡é€»è¾‘
- å‘½åä»¥ `use` å¼€å¤´ï¼Œé©¼å³°å‘½å

```typescript
// âœ… æ­£ç¡® - åŠŸèƒ½ç‰¹å®šçš„ Hook
features / auth / composables / useAuth.ts;
features / user / composables / useUserProfile.ts;
features / cart / composables / useCart.ts;

// âŒ é¿å… - è¿‡äºé€šç”¨çš„å‘½å
features / auth / composables / useApi.ts; // åº”è¯¥æ”¾åœ¨å…¨å±€ composables
```

#### å…¨å±€å…±äº«çš„ Hook

**ä½ç½®**: `src/composables/`

- åœ¨å¤šä¸ªåŠŸèƒ½æˆ–æ•´ä¸ªåº”ç”¨ä¸­å¤ç”¨
- ä¸å…·ä½“ä¸šåŠ¡æ— å…³çš„å·¥å…·æ€§é€»è¾‘
- æä¾›é€šç”¨çš„æ•°æ®å¤„ç†èƒ½åŠ›

```typescript
// âœ… æ­£ç¡® - å…¨å±€å…±äº«çš„ Hook
src / composables / useApi.ts;
src / composables / useLocalStorage.ts;
src / composables / useDebounce.ts;

// âŒ é¿å… - åŒ…å«ä¸šåŠ¡é€»è¾‘
src / composables / useUserAuth.ts; // åº”è¯¥æ”¾åœ¨ features/auth/composables
```

### 3. ç»„ä»¶å¼€å‘è§„èŒƒ

#### ç»„ä»¶å‘½å

```typescript
// å…¨å±€åŸºç¡€ç»„ä»¶
BaseButton.vue;
BaseInput.vue;
BaseModal.vue;

// åŠŸèƒ½ç‰¹å®šç»„ä»¶
UserProfile.vue;
ProductCard.vue;
OrderSummary.vue;

// ç»„åˆç»„ä»¶
UserProfileEditor.vue;
ProductListWithFilter.vue;
```

#### ç»„ä»¶ Props å®šä¹‰

```typescript
<script setup lang="ts">
interface Props {
  // å¿…å¡«å±æ€§
  title: string
  items: Array<any>

  // å¯é€‰å±æ€§
  loading?: boolean
  maxItems?: number

  // å¤æ‚å±æ€§
  config?: {
    sortable: boolean
    filterable: boolean
  }
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  maxItems: 10,
  config: () => ({
    sortable: true,
    filterable: false
  })
})
</script>
```

### 4. æµ‹è¯•ç­–ç•¥

#### å•å…ƒæµ‹è¯•ç»“æ„

```
src/features/auth/__tests__/
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useAuth.spec.ts
â”‚   â””â”€â”€ useUserPermissions.spec.ts
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ authStore.spec.ts
â””â”€â”€ components/
    â””â”€â”€ LoginForm.spec.ts
```

#### æµ‹è¯•ç¤ºä¾‹

```typescript
// features/auth/__tests__/useAuth.spec.ts
import { describe, it, expect, vi } from "vitest";
import { useAuth } from "../composables/useAuth";
import { useAuthStore } from "../stores/authStore";

// Mock ä¾èµ–
vi.mock("../stores/authStore");
vi.mock("../api/authApi");

describe("useAuth", () => {
  it("should login successfully", async () => {
    const { login, loading, error } = useAuth();

    expect(loading.value).toBe(false);

    const loginPromise = login({
      email: "test@example.com",
      password: "password",
    });

    expect(loading.value).toBe(true);

    await loginPromise;

    expect(loading.value).toBe(false);
    expect(error.value).toBeNull();
  });
});
```

## æœ€ä½³å®è·µ

### 1. ä»£ç ç»„ç»‡åŸåˆ™

#### å•ä¸€èŒè´£åŸåˆ™

```typescript
// âœ… æ­£ç¡® - æ¯ä¸ªæ–‡ä»¶åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½
// useAuth.ts - åªå¤„ç†è®¤è¯é€»è¾‘
// authStore.ts - åªç®¡ç†è®¤è¯çŠ¶æ€
// authApi.ts - åªå¤„ç†è®¤è¯ API è°ƒç”¨

// âŒ é¿å… - ä¸€ä¸ªæ–‡ä»¶åŒ…å«å¤šä¸ªä¸ç›¸å…³çš„åŠŸèƒ½
// auth.ts - åŒ…å«è®¤è¯é€»è¾‘ã€çŠ¶æ€ç®¡ç†ã€API è°ƒç”¨
```

#### ä¾èµ–æ–¹å‘è§„åˆ™

```typescript
// âœ… æ­£ç¡® - ä¾èµ–æ–¹å‘ä»å…·ä½“åˆ°æŠ½è±¡
// components/ â†’ composables/ â†’ stores/ â†’ api/ â†’ types/

// âŒ é¿å… - å¾ªç¯ä¾èµ–
// components/ â†â†’ composables/
```

### 2. æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### ç»„ä»¶æ‡’åŠ è½½

```typescript
// è·¯ç”±æ‡’åŠ è½½
const LoginPage = () => import("@/pages/LoginPage.vue");
const DashboardPage = () => import("@/pages/DashboardPage.vue");

// ç»„ä»¶æ‡’åŠ è½½
const HeavyComponent = defineAsyncComponent(
  () => import("@/components/HeavyComponent.vue")
);
```

#### ç»„åˆå¼å‡½æ•°ä¼˜åŒ–

```typescript
// ä½¿ç”¨ computed å’Œ watchEffect ä¼˜åŒ–å“åº”å¼
const useOptimizedComposable = () => {
  const data = ref([]);
  const searchQuery = ref("");

  // âœ… ä½¿ç”¨ computed ç¼“å­˜è®¡ç®—ç»“æœ
  const filteredData = computed(() =>
    data.value.filter((item) => item.name.includes(searchQuery.value))
  );

  // âœ… ä½¿ç”¨ watchEffect è‡ªåŠ¨è·Ÿè¸ªä¾èµ–
  watchEffect(() => {
    if (searchQuery.value) {
      // æ‰§è¡Œæœç´¢é€»è¾‘
    }
  });

  return { data, searchQuery, filteredData };
};
```

### 3. é”™è¯¯å¤„ç†ç­–ç•¥

#### å…¨å±€é”™è¯¯å¤„ç†

```typescript
// src/utils/errorHandler.ts
export const handleError = (error: unknown, context?: string) => {
  console.error(`[Error${context ? ` in ${context}` : ""}]`, error);

  if (error instanceof Error) {
    // å‘é€åˆ°é”™è¯¯ç›‘æ§æœåŠ¡
    sendToErrorMonitoring(error);

    // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
    showErrorMessage(getUserFriendlyMessage(error));
  }
};

// åœ¨ç»„åˆå¼å‡½æ•°ä¸­ä½¿ç”¨
const useSafeComposable = () => {
  const execute = async () => {
    try {
      // ä¸šåŠ¡é€»è¾‘
    } catch (error) {
      handleError(error, "useSafeComposable");
    }
  };

  return { execute };
};
```

## é¡¹ç›®é…ç½®

### Vite é…ç½®ç¤ºä¾‹

```typescript
// vite.config.ts
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import { resolve } from "path";

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      "@": resolve(__dirname, "src"),
      "@components": resolve(__dirname, "src/components"),
      "@composables": resolve(__dirname, "src/composables"),
      "@features": resolve(__dirname, "src/features"),
      "@stores": resolve(__dirname, "src/stores"),
      "@types": resolve(__dirname, "src/types"),
      "@utils": resolve(__dirname, "src/utils"),
    },
  },
  server: {
    port: 3000,
    open: true,
  },
  build: {
    outDir: "dist",
    sourcemap: true,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ["vue", "vue-router", "pinia"],
          ui: ["element-plus", "ant-design-vue"],
        },
      },
    },
  },
});
```

### TypeScript é…ç½®

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "preserve",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@composables/*": ["src/composables/*"],
      "@features/*": ["src/features/*"],
      "@stores/*": ["src/stores/*"],
      "@types/*": ["src/types/*"],
      "@utils/*": ["src/utils/*"]
    }
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

## æ€»ç»“

è¿™ä¸ªé¡¹ç›®æ¶æ„æä¾›äº†ï¼š

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

1. **æ¨¡å—åŒ–å¼€å‘** - åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºå›¢é˜Ÿåˆ†å·¥åä½œ
2. **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒï¼Œæé«˜ä»£ç è´¨é‡
3. **å¯ç»´æŠ¤æ€§** - æ¸…æ™°çš„ä»£ç ç»„ç»‡å’Œåˆ†å±‚ï¼Œä¾¿äºç»´æŠ¤
4. **å¯æµ‹è¯•æ€§** - æ¨¡å—åŒ–çš„æµ‹è¯•å‹å¥½è®¾è®¡
5. **ä»£ç å¤ç”¨** - é«˜åº¦çš„ç»„ä»¶å’Œé€»è¾‘å¤ç”¨
6. **å¯æ‰©å±•æ€§** - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œæ‰©å±•ç°æœ‰åŠŸèƒ½

### ğŸš€ é€‚ç”¨åœºæ™¯

- ä¸­å¤§å‹ä¼ä¸šçº§åº”ç”¨
- éœ€è¦é•¿æœŸç»´æŠ¤çš„é¡¹ç›®
- å›¢é˜Ÿåä½œå¼€å‘
- éœ€è¦é«˜åº¦å¯æµ‹è¯•æ€§çš„é¡¹ç›®
- å¤æ‚çš„çŠ¶æ€ç®¡ç†éœ€æ±‚

### ğŸ“ˆ æ‰©å±•å»ºè®®

- è€ƒè™‘é›†æˆå¾®å‰ç«¯æ¶æ„
- æ·»åŠ æ€§èƒ½ç›‘æ§å’Œé”™è¯¯è¿½è¸ª
- å®ç°å®Œæ•´çš„ CI/CD æµæ°´çº¿
- æ·»åŠ ä»£ç ç”Ÿæˆå·¥å…·æé«˜å¼€å‘æ•ˆç‡

è¿™ç§æ¶æ„ç»è¿‡å®è·µéªŒè¯ï¼Œèƒ½å¤Ÿæœ‰æ•ˆç®¡ç†å‰ç«¯é¡¹ç›®çš„å¤æ‚åº¦ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ï¼Œæ˜¯æ„å»ºç°ä»£åŒ– Vue.js åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚

```

è¿™ä¸ªè¯¦ç»†çš„ Markdown æ–‡æ¡£æä¾›äº†å®Œæ•´çš„å‰ç«¯é¡¹ç›®æ¶æ„è¯´æ˜ï¼ŒåŒ…æ‹¬ç›®å½•ç»“æ„ã€ä»£ç ç¤ºä¾‹ã€æœ€ä½³å®è·µå’Œé…ç½®æŒ‡å—ï¼Œå¯ä»¥ä½œä¸ºå›¢é˜Ÿå¼€å‘å‚è€ƒæ–‡æ¡£ä½¿ç”¨ã€‚
```
